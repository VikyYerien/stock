<div class="container pt-5">
  <div class="row">
    <div class="col-12 col-lg-8 offset-lg-2">
      <form [formGroup]="productForm" (ngSubmit)="onSubmit()" novalidate>
        
        <div class="mb-3">
          <label for="name" class="form-label">Nombre</label>
          <input type="text" id="name" class="form-control" formControlName="name" 
                [ngClass]="{ 'is-invalid': f['name'].invalid && f['name'].touched }" />
          <div *ngIf="f['name'].invalid && f['name'].touched" class="invalid-feedback">
            El nombre es obligatorio y debe tener al menos 2 caracteres.
          </div>
        </div>

        <div class="mb-3">
          <label for="description" class="form-label">Descripción</label>
          <textarea id="description" class="form-control" formControlName="description" 
                    [ngClass]="{ 'is-invalid': f['description'].invalid && f['description'].touched }"></textarea>
          <div *ngIf="f['description'].invalid && f['description'].touched" class="invalid-feedback">
            La descripción es obligatoria y debe tener al menos 10 caracteres.
          </div>
        </div>

        <div class="mb-3">
          <label for="priceAmmount" class="form-label">Precio</label>
          <div class="input-group">
            <select
              class="form-select"
              formControlName="priceCurrency"
              [ngClass]="{ 'is-invalid': f['priceCurrency'].invalid && f['priceCurrency'].touched }"
            >
              <option value="" disabled>Selecciona la moneda</option>
              <option *ngFor="let type of currencies" [value]="type">{{ type }}</option>
            </select>
        
            <input
              type="text"
              class="form-control"
              formControlName="priceAmmount"
              placeholder="Ingresa el valor"
              [ngClass]="{ 'is-invalid': f['priceAmmount'].invalid && f['priceAmmount'].touched }"
            />
          </div>
          <!-- Mensajes de error en una fila -->
          <div class="d-flex gap-3">
            <div *ngIf="f['priceCurrency'].invalid && f['priceCurrency'].touched" class="invalid-feedback d-block">
              La moneda es obligatoria.
            </div>
            <div *ngIf="f['priceAmmount'].invalid && f['priceAmmount'].touched" class="invalid-feedback d-block">
              El precio es obligatorio y debe ser válido.
            </div>
          </div>
        </div>

        <div class="mb-3">
          <label for="imgUrls" class="form-label">URLs de imágenes</label>
          <input type="text" id="imgUrls" class="form-control" formControlName="imgUrls" 
                [ngClass]="{ 'is-invalid': f['imgUrls'].invalid && f['imgUrls'].touched }" />
          <div *ngIf="f['imgUrls'].invalid && f['imgUrls'].touched" class="invalid-feedback">
            Las URLs de las imágenes son obligatorias.
          </div>
        </div>

        <div class="mb-3">
          <label for="batchNumber" class="form-label">Número de Lote</label>
          <input type="text" id="batchNumber" class="form-control" formControlName="batchNumber" 
                [ngClass]="{ 'is-invalid': f['batchNumber'].invalid && f['batchNumber'].touched }" />
          <div *ngIf="f['batchNumber'].invalid && f['batchNumber'].touched" class="invalid-feedback">
            El número de lote es obligatorio.
          </div>
        </div>

        <div class="mb-3">
          <label for="code" class="form-label">Código</label>
          <input type="text" id="code" class="form-control" formControlName="code" 
                [ngClass]="{ 'is-invalid': f['code'].invalid && f['code'].touched }" />
          <div *ngIf="f['code'].invalid && f['code'].touched" class="invalid-feedback">
            El número de lote es obligatorio.
          </div>
        </div>

        <div class="mb-3">
          <label for="categoryId" class="form-label">Categoría</label>
          <select 
            id="categoryId" 
            class="form-select" 
            formControlName="categoryId" 
            [ngClass]="{ 'is-invalid': f['categoryId'].invalid && f['categoryId'].touched }"
          >
            <option value="" disabled>Selecciona una categoría</option>
            <option *ngFor="let category of categories" [value]="category._id">{{ category.name }}</option>
          </select>
          <div *ngIf="f['categoryId'].invalid && f['categoryId'].touched" class="invalid-feedback">
            La categoría es obligatoria.
          </div>
        </div>

        <div class="mb-3">
          <label for="stock" class="form-label">Stock</label>
          <input type="text" id="stock" class="form-control" formControlName="stock" 
                [ngClass]="{ 'is-invalid': f['stock'].invalid && f['stock'].touched }" />
          <div *ngIf="f['stock'].invalid && f['stock'].touched" class="invalid-feedback">
            El stock es obligatorio y debe ser un número.
          </div>
        </div>

        <div class="col-12 d-flex justify-content-center justify-content-lg-end">
          <button type="submit" class="btn btn-primary" [disabled]="productForm.invalid">
            {{ btnTxt }}
          </button>
        </div>
      </form>
    </div>
  </div>   
</div>
